@model IEnumerable<MacroNewt.Models.Meal>

<div class="modal fade" id="mealCalendarModal" role="dialog">
    <div class="modal-dialog vertical-align-center">
        <div class="modal-content" style="width:100%;">

            <div id="calendarDiv" style="padding:10px;">

            </div>


        </div>
    </div>
</div>






<script>
    $(document).ready(function () {
        

        var calendarTarget = document.getElementById('calendarDiv');
        
            var calendar = new FullCalendar.Calendar(calendarTarget, {
                plugins: ['dayGrid', 'interaction'],
                header: {
                    left: 'prev,next',
                    center: 'title',
                    right: 'today,dayGridMonth'
                },
                navLinks: true,
                timeZone: 'UTC',
                eventLimit: true,
                eventLimitText: "View",
                events: [
                @foreach (var meal in Model)
                {
                    var last = Model.Last();

                    string mealTitle = meal.Title.ToString();
                    string startDate = meal.MealDate.ToString("yyyy-MM-ddTHH:mm:ssZ");
                    string endDate = meal.MealDate.AddHours(0.5).ToString("yyyy-MM-ddTHH:mm:ssZ");

                    <text>{
                        title: "@mealTitle",
                        start: "@startDate",
                        start: "@endDate",
                        allDay: false
                    }</text>
                    if (meal != last)
                    {
                        <text>,</text>
                    }
                }
                ]


            });

            calendar.render();
        

        $('#mealCalendarModal').on('shown.bs.modal', function () {
            calendar.render();
            $('#calendarDiv').show();
        });
            
    });


</script>